<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8">
    <!-- Für Mobilgeräte initialen Zoom abschalten -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Angaben für Suchmaschinen -->
    <!-- Beschreibung -->
    <meta name="description" content="Eine Seite über Pferde.">
    <!-- Stichwörter -->
    <meta name="keywords" content="Pferde, Reiten">
    <title>
        Pferde, Reiten und co.
    </title>
    <link id="css" rel="stylesheet" type="text/css" href="card.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <!--<script type="text/javascript" src="Leaflet.FileLayer\src\leaflet.filelayer.js">
    </script>
    <script src="equestrian.geojson" type="text/javascript">
    </script>
    <script src="horse.riding.geojson" type="text/javascript">
    </script>

    <script type="text/javascript" src="card.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="leaflet.filelayer.js" type="text/javascript"></script>

    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>-->

</head>

<body>

    <header>
        <!--LOGO-->
        <img id="logo" src="Bilder/luck.png" alt="logo">

        <nav id="navigation">
            <!-- Side navigation -->
            <a href="index.html">Home</a>
            <a href="tipps.html">Tipps zum Umgang</a>
            <a href="#">Reiterhöfe</a>
        </nav>

    </header>

    <h1>
        Reiterhöfe in deinem Bundesland
    </h1>

    <div id="map">

        <script>

            window.onload = function () {
                var latlng;
                var map = L.map('map');
                var osm;
                var equestrian;

                //Get own position

                navigator.geolocation.getCurrentPosition(function (location) {
                    latlng = new L.LatLng(location.coords.latitude, location.coords.longitude);

                    map.setView(latlng, 10);


                    osm = new L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://mapbox.com">Mapbox</a>',
                        minZoom: 0,
                        maxZoom: 18,
                        id: 'mapbox.streets',
                        accessToken: 'pk.eyJ1IjoiYmJyb29rMTU0IiwiYSI6ImNpcXN3dnJrdDAwMGNmd250bjhvZXpnbWsifQ.Nf9Zkfchos577IanoKMoYQ'
                    }).addTo(map);

                    var myPositionIcon = L.icon({
                        iconUrl: 'Bilder/location-304467_640.png',
                        iconSize: [38, 95]
                    })

                    var markerPosition = L.marker(latlng, { icon: myPositionIcon }).addTo(map);
                });


                // set up the map if not done

                /*if (map == null) {
                    var map = new L.map("map");
                    var osm = new L.TileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        minZoom: 10,
                        maxZoom: 18,
                        attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
                    });

                    // define view
                    map.setView(new L.LatLng(49.451993, 11.073397), 5);
                    map.addLayer(osm);
                }*/


                var xhr = new XMLHttpRequest();
                xhr.open('GET', 'equestrian.geojson');
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        L.geoJSON(JSON.parse(xhr.responseText)).addTo(map);
                    }
                };
                xhr.send();

            }

        </script>

    </div>


    </script>

</body>

</html>